(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{48:function(e,t,n){},49:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(19),o=n.n(i),l=(n(48),n(2)),s=n(10),d=(n(49),n(42)),u=n(4),b=n(3),f=n(11),p=n.n(f),j=(n(21),"http://localhost:5000"),x=n(12),O={};O.A=1,O.B=10,O.C=10,O.D=7,O.E=2,O.F=8,O.G=4,O.H=3,O.I=2,O.J=3,O.K=3,O.L=3,O.M=2,O.N=2,O.O=2,O.P=4,O.Q=10,O.R=4,O.S=3,O.T=3,O.U=5,O.V=5,O.X=10,O.Y=3,O.Z=10,function(e){e[e.UNREVEALED=0]="UNREVEALED",e[e.REVEALED=1]="REVEALED",e[e.REVEALED_LAST_TURN=2]="REVEALED_LAST_TURN"}(a||(a={}));var v=n(25),g=n.n(v),h=n(37),E=n(14),S=n(38);var m,R,L,y,A,w,k,T,D,N,V,U,_,C,I,P,F,J,W,z,B=function(){var e=Object(r.useState)(function(e){var t=[{name:"",points:0},{name:"",points:0}];return{currentSentence:e,playerStates:t,turnOfPlayer:t[0].name,letterRevealState:[]}}("")),t=Object(s.a)(e,2),n=t[0],c=t[1],i=function(){return function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}("Ylen kysely kan\xadsan\xadedus\xadta\xadjil\xadle: Suuri enemmist\xf6 vastaajista kannattaa j\xe4re\xe4mpien aitojen rakentamista it\xe4rajalle".replace(/\u00ad/g,"").toLocaleUpperCase())},o=Object(r.useState)(i()),l=Object(s.a)(o,2),d=l[0],u=(l[1],function(e,t){return function(e){return{letterRevealState:Object(x.a)(e.letterRevealState),playerStates:Object(x.a)(e.playerStates),turnOfPlayer:e.turnOfPlayer,currentSentence:e.currentSentence}}(Object(E.a)(Object(E.a)({},n),{},{letterRevealState:e,playerStates:t}))}),b=function(){var e=Object(h.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(j+"/game",{game:t});case 2:n=e.sent,c(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=Object(r.useCallback)((function(){p.a.get(j+"/game").then((function(e){c(e.data)}))}),[]);return Object(r.useEffect)((function(){var e=new S.w3cwebsocket("ws://localhost:8999");e.onopen=function(){},e.onmessage=function(e){var t=JSON.parse(e.data);t&&c(t)},f()}),[f]),{getNextSentence:i,isLetterAtIndexRevealed:function(e){return n.letterRevealState[e]>a.UNREVEALED},revealLetters:function(e){var t=Object(x.a)(n.letterRevealState),r=function(e,t){for(var r=0,c=0;c<d.length;c++)d[c]===e?(t[c]=a.REVEALED_LAST_TURN,r+=O[e]):n.letterRevealState[c]===a.REVEALED_LAST_TURN&&(t[c]=a.REVEALED);return r}(e,t),c=Object(x.a)(n.playerStates);c[0].points+=r,b(u(t,c))},gameState:n,currentSentence:d,isSpecialLetter:function(e){return!e.match(/[A-Z]/g)},revealWord:function(e){for(var t=function(e){for(var t=0;t<d.length;t++)n.letterRevealState[t]===a.REVEALED_LAST_TURN&&(e[t]=a.REVEALED);return e}(Object(x.a)(n.letterRevealState)),r=d.indexOf(e),c=0;r>=0;){for(var i=r;i<r+e.length;i++){if(!n.letterRevealState[i]||n.letterRevealState[i]===a.UNREVEALED)c+=O[d[i]],t[i]=a.REVEALED_LAST_TURN}r=d.indexOf(e,r+e.length)}var o=Object(x.a)(n.playerStates);o[0].points+=c,b(u(t,o))}}},M=n(1),G=function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],c=n[1];return Object(M.jsx)(Q,{children:Object(M.jsxs)(H,{children:[Object(M.jsx)(Y,{onInput:function(e){c(e.target.value.toUpperCase())},value:a}),Object(M.jsx)(Z,{onClick:function(){""!==a&&(e.revealWord(a),c(""))},children:"Quess"})]})})},H=b.a.div(m||(m=Object(l.a)(["\n    display: flex;\n    justify-content: center;\n"]))),Q=b.a.div(R||(R=Object(l.a)(["\n    background: #c3bbbb;\n    display: flex;\n    flex-direction: column;\n"]))),Y=b.a.textarea(L||(L=Object(l.a)(["\n    height: 60px;\n"]))),Z=b.a.button(y||(y=Object(l.a)(["\n    height: 60px;\n"]))),K=function(e){var t=e.isLastRevealed?{border:"2px solid #12ff45"}:{},n=Object(E.a)(Object(E.a)({},t),{},{background:""===e.letter?"yellow":"white"});return Object(M.jsx)("div",{style:n,className:"letterTile",children:e.letter})},X=function(e){var t=Object(r.useState)(0),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(0),o=Object(s.a)(i,2),l=o[0];o[1];Object(r.useEffect)((function(){c(e.points)}),[e.points]);return Object(M.jsxs)(te,{children:[Object(M.jsxs)(ee,{children:[Object(M.jsx)(q,{children:e.name}),Object(M.jsx)("div",{children:a+"pts"})]}),Object(M.jsx)($,{children:l})]})},q=(b.a.button(A||(A=Object(l.a)(["\n  font-weight: bold;\n"]))),b.a.div(w||(w=Object(l.a)(["\n  font-weight: bold;\n  text-decoration: underline;\n  color: #2e4289;\n"])))),$=b.a.div(k||(k=Object(l.a)(["\nbackground-color: #636a3f;\n    padding-top: 20px;\n    padding-left: 5px;\n    padding-right: 13px;\n    border: 1px;\n    width: 10px;\n    border-style: inset;\n    border-color: #eef1e3;\n    border-top-left-radius: 2px;\n    border-bottom-left-radius: 2px;\n    height: 37px;\n    margin-top: 2px;\n    border-style: inset;\n"]))),ee=b.a.div(T||(T=Object(l.a)(["\n      padding: 10px;  \n      min-width: 57px;\n      padding-left: 15px;\n      display: flex;\n      flex-direction: column;\n      background-color: #636a3f;\n    & > div {\n      display: inline-block;\n    }\n    "]))),te=(b.a.button(D||(D=Object(l.a)(["\n      height: 100%;\n      background-color: #eef1e3;\n    "]))),b.a.div(N||(N=Object(l.a)(["\n    display: flex;\n    flex-direction: row;\n    padding: 10px;\n    border-top: 1px solid white;\n    border-top-style: inset;\n    "])))),ne=(b.a.div(V||(V=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    "]))),function(){var e=B(),t=(e.getNextSentence,e.isLetterAtIndexRevealed),n=e.currentSentence,c=e.gameState,i=e.revealLetters,o=e.isSpecialLetter,l=e.revealWord,s=Object(r.useCallback)((function(e){var a=n[e];return o(a)?n[e]:t(e)?a:""}),[t,n]),d=Object(r.useCallback)((function(e){return c.letterRevealState[e]===a.REVEALED_LAST_TURN}),[c]);return Object(M.jsxs)(re,{children:[Object(M.jsx)(ae,{children:Array.from(n).map((function(e,n){return Object(M.jsx)(K,{letter:s(n),isLastRevealed:d(n),isRevealed:t(n)})}))}),Object(M.jsx)(G,{revealLetters:i,revealWord:l}),c.playerStates.map((function(e){return Object(M.jsx)(X,{isActive:!1,name:e.name,points:e.points})}))]})}),ae=b.a.div(U||(U=Object(l.a)(["\n    width: 80%;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n}\n"]))),re=b.a.div(_||(_=Object(l.a)(["\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    align-content: center;\n    align-items: center;\n"])));b.a.div(C||(C=Object(l.a)(["\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\n"]))),b.a.h2(I||(I=Object(l.a)(["\n  font-weight: normal;\n  margin-bottom: 25px;\n    margin-top: 2px;\n"]))),b.a.button(P||(P=Object(l.a)(["\npadding: 15px;\n    margin-top: 20px;\n    width: 150px;\n    border: 1px solid #386383;\n    border-radius: 10px;\n    background: #0e1d21;\n    color: white;\n    font-size: 14px;\n}\n"]))),b.a.input(F||(F=Object(l.a)(["\n    padding: 14px;\n    border: 1px solid #386383;\n    border-radius: 3px;\n    background: #0e1d21;\n    color: white;\n    text-align: center;\n"]))),b.a.p(J||(J=Object(l.a)(["\nfont-size: 60px;\ncolor: #386383;\n"]))),b.a.a(W||(W=Object(l.a)(["\n    font-size: 20px;\n"]))),b.a.div(z||(z=Object(l.a)(["\n    display: flex;\n    color: white;\n    flex-direction: column;\n    align-content: center;\n    align-items: center;\n    background: #cf181f;\n    padding: 14px;\n    border-radius: 6px;\n    width: 301px;\n    border: 1px solid #ffffff7a;\n  "])));var ce=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){""===document.cookie&&a(!1),p.a.get(j+"/isLoggedIn?username="+document.cookie).then((function(e){if(200==e.status){var t=e.data;console.log("IS logged in user: "+document.cookie),console.log("GOT RESP: "+t.isLoggedIn),a(t.isLoggedIn)}else a(!1)}))}),[]),Object(M.jsx)(d.a,{children:Object(M.jsx)(u.c,{children:Object(M.jsx)(u.a,{path:"/",children:n?Object(M.jsx)("div",{}):Object(M.jsx)(ne,{})})})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};o.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(ce,{})}),document.getElementById("root")),ie()}},[[78,1,2]]]);
//# sourceMappingURL=main.515e3db2.chunk.js.map